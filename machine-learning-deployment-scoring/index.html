
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="IBM Developer">
      
      
        <link rel="canonical" href="https://cloud-native-toolkit.github.io/credit-risk-workshop-cpd/machine-learning-deployment-scoring/">
      
      
        <link rel="prev" href="../machine-learning-autoai/">
      
      
        <link rel="next" href="../openscale-fastpath/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>Deploy and Test Machine Learning Models - Cloud Pak for Data Credit Risk Workshop</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#machine-learning-model-deployment-and-scoring" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Cloud Pak for Data Credit Risk Workshop" class="md-header__button md-logo" aria-label="Cloud Pak for Data Credit Risk Workshop" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cloud Pak for Data Credit Risk Workshop
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deploy and Test Machine Learning Models
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/cloud-native-toolkit/credit-risk-workshop-cpd" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    credit-risk-workshop-cpd
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        Welcome
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../pre-work/" class="md-tabs__link md-tabs__link--active">
        Workshop
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../faq/" class="md-tabs__link">
        Workshop Resources
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Cloud Pak for Data Credit Risk Workshop" class="md-nav__button md-logo" aria-label="Cloud Pak for Data Credit Risk Workshop" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Cloud Pak for Data Credit Risk Workshop
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/cloud-native-toolkit/credit-risk-workshop-cpd" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    credit-risk-workshop-cpd
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
          Welcome
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Welcome
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        About the workshop
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Workshop
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Workshop
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pre-work/" class="md-nav__link">
        Pre-work
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data-connection-and-virtualization/" class="md-nav__link">
        Data Connection and Virtualization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../addData/" class="md-nav__link">
        Import Data to Project
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data-visualization-and-refinery/" class="md-nav__link">
        Data Visualization with Data Refinery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../watson-knowledge-catalog-user/" class="md-nav__link">
        Enterprise data governance for Viewers using Watson Knowledge Catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../watson-knowledge-catalog-admin/" class="md-nav__link">
        Enterprise data governance for Admins using Watson Knowledge Catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../machine-learning-in-jupyter-notebook/" class="md-nav__link">
        Machine Learning with Jupyter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../machine-learning-autoai/" class="md-nav__link">
        Machine Learning with AutoAI
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Deploy and Test Machine Learning Models
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Deploy and Test Machine Learning Models
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#online-model-deployment" class="md-nav__link">
    Online Model Deployment
  </a>
  
    <nav class="md-nav" aria-label="Online Model Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-online-model" class="md-nav__link">
    Deploy Online Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-online-model-deployment" class="md-nav__link">
    Test Online Model Deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-test-online-model-deployment-using-curl" class="md-nav__link">
    (Optional) Test Online Model Deployment using cURL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-batch-model-deployment" class="md-nav__link">
    (Optional) Batch Model Deployment
  </a>
  
    <nav class="md-nav" aria-label="(Optional) Batch Model Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-batch-model" class="md-nav__link">
    Deploy Batch Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-and-schedule-a-job" class="md-nav__link">
    Create and Schedule a Job
  </a>
  
    <nav class="md-nav" aria-label="Create and Schedule a Job">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#open-the-batch-notebook" class="md-nav__link">
    Open the Batch Notebook
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-notebook-sections" class="md-nav__link">
    Run Notebook sections
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanup-and-stop-environment" class="md-nav__link">
    Cleanup and Stop Environment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../openscale-fastpath/" class="md-nav__link">
        Monitoring models with OpenScale GUI (Auto setup Monitoring)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../openscale-notebook/" class="md-nav__link">
        Monitoring models with OpenScale (Notebook)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Workshop Resources
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Workshop Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQs / Tips
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          Resources
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.ibm.com/products/cloud-pak-for-data" class="md-nav__link">
        IBM Cloud Pak for Data - Information and Trial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.ibm.com/support/knowledgecenter/SSQNUZ" class="md-nav__link">
        IBM Cloud Pak for Data - Knowledge Center
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://cloud.ibm.com/apidocs/cloud-pak-data" class="md-nav__link">
        IBM Cloud Pak for Data - Platform API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://community.ibm.com/community/user/cloudpakfordata/home" class="md-nav__link">
        IBM Cloud Pak for Data - Community
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.ibm.com/cloud/watson-knowledge-catalog" class="md-nav__link">
        Watson Knowledge Catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://developer.ibm.com/clouddataservices/docs/data-catalog/get-started" class="md-nav__link">
        Watson Knowledge Catalog Learning Center
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://developer.ibm.com" class="md-nav__link">
        IBM Developer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://developer.ibm.com/components/cloud-pak-for-data" class="md-nav__link">
        IBM Developer - Cloud Pak for Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.ibm.com/cloud/architecture/architectures/dataArchitecture" class="md-nav__link">
        IBM Garage Architecture - Data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#online-model-deployment" class="md-nav__link">
    Online Model Deployment
  </a>
  
    <nav class="md-nav" aria-label="Online Model Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-online-model" class="md-nav__link">
    Deploy Online Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-online-model-deployment" class="md-nav__link">
    Test Online Model Deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-test-online-model-deployment-using-curl" class="md-nav__link">
    (Optional) Test Online Model Deployment using cURL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-batch-model-deployment" class="md-nav__link">
    (Optional) Batch Model Deployment
  </a>
  
    <nav class="md-nav" aria-label="(Optional) Batch Model Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-batch-model" class="md-nav__link">
    Deploy Batch Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-and-schedule-a-job" class="md-nav__link">
    Create and Schedule a Job
  </a>
  
    <nav class="md-nav" aria-label="Create and Schedule a Job">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#open-the-batch-notebook" class="md-nav__link">
    Open the Batch Notebook
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-notebook-sections" class="md-nav__link">
    Run Notebook sections
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanup-and-stop-environment" class="md-nav__link">
    Cleanup and Stop Environment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="machine-learning-model-deployment-and-scoring">Machine Learning Model Deployment and Scoring<a class="headerlink" href="#machine-learning-model-deployment-and-scoring" title="Permanent link">&para;</a></h1>
<p>In this module, we will go through the process of deploying a machine learning model so it can be used by others and its performance can be monitored and validated. The deployment will result in an endpoint that makes the model available for wider use in applications and to make business decisions. There are several types of deployments available (<a href="https://www.ibm.com/docs/en/cloud-paks/cp-data/4.7.x?topic=specifications-supported-frameworks-software">depending on the model framework used</a>), of which we will explore:</p>
<ul>
<li>Online Deployments - Creates an endpoint to generate a score or prediction in real time.</li>
<li>Batch Deployments - Creates an endpoint to schedule the processing of bulk data to return predictions.</li>
</ul>
<p>This module is broken up into several sections that explore the different model deployment options as well as the different ways to invoke or consume the model. The first section of this lab will build an online deployment and test the model endpoint using both the built-in testing tool as well as external testing tools. The remaining sections are optional, they build and test the batch deployment, followed by using the model from a python application.</p>
<blockquote>
<p><em>Note: It is assumed that you have followed the instructions in the pre-work section to create a project based on an existing project file. If you did not use the project import or do not see the Jupyter notebooks mentioned in this module, see the <code>Workshop Resources</code> -&gt; <code>FAQs / Tips</code> section for instructions to import the necessary notebooks. Also note that the Jupyter notebooks included in the project have been cleared of output. If you would like to see the notebook that has already been completed with output, see the <code>Workshop Resources</code> -&gt; <code>FAQs / Tips</code> section for links to the completed notebooks.</em></p>
<p><em>Note: It is also assumed that you have completed one of the machine learning modules to promote a model to the deployment space. If not, follow the instructions in one of the machine learning modules to create and promote a machine learning model.</em></p>
</blockquote>
<h2 id="online-model-deployment">Online Model Deployment<a class="headerlink" href="#online-model-deployment" title="Permanent link">&para;</a></h2>
<h3 id="deploy-online-model">Deploy Online Model<a class="headerlink" href="#deploy-online-model" title="Permanent link">&para;</a></h3>
<p>After a model has been created and saved / promoted to our deployment space, we will want to deploy the model so it can be used by others. For this section, we will be creating an online deployment. This type of deployment will make an instance of the model available to make predictions in real time via an API. Although we will use the Cloud Pak for Data UI to deploy the model, the same can be done programmatically.</p>
<ol>
<li>
<p>Navigate to the left-hand (☰) hamburger menu and click on <code>Deployments</code>.</p>
<p><img alt="Analytics Analyze deployments" src="../images/navigation/menu-analytics-deployments.png" /></p>
</li>
<li>
<p>Click on the <code>Spaces</code> tab and then choose the deployment space you setup previously by clicking on the name of your space.</p>
<p><img alt="Deployments space" src="../images/deployment/select-depspace.png" /></p>
</li>
<li>
<p>From your deployment space overview, select the <code>Assets</code> tab and find the model for which you want to create a deployment. Click on the "kebab" menu (three vertical dots) on the right side of the model row and select <code>Deploy</code>.</p>
<blockquote>
<p>Note: There may be more than one model listed in the 'Models' section. This can happen if you have run the Jupyter notebook more than once or if you have run through both the Jupyter notebook and AutoAI modules to create models. Although you could select any of the models you see listed in the page, the recommendation is to start with whichever model is available that is using a <code>spark-mllib_X.X</code> software specification.</p>
</blockquote>
<p><img alt="Actions Deploy model" src="../images/deployment/deploy-spark-model.png" /></p>
</li>
<li>
<p>On the 'Create a deployment' screen, choose <code>Online</code> for the <code>Deployment Type</code>, give the Deployment a name and optional description and click the <em><code>Create</code></em> button.</p>
<p><img alt="Online Deployment Create" src="../images/deployment/deploy-online-deployment.png" /></p>
</li>
<li>
<p>Click on the <code>Deployments</code> tab. The online deployment will show as <code>Initializing</code> and then switch to <code>Deployed</code> when done.</p>
<p><img alt="Status Deployed" src="../images/deployment/deploy-status-deployed.png" /></p>
</li>
</ol>
<h3 id="test-online-model-deployment">Test Online Model Deployment<a class="headerlink" href="#test-online-model-deployment" title="Permanent link">&para;</a></h3>
<p>The platform offers tools to quickly test out Watson Machine Learning models. We begin with the built-in tooling.</p>
<ol>
<li>
<p>From the Model deployment page, once the deployment status shows as <code>Deployed</code>, click on the name of your deployment.</p>
<p><img alt="Select deployment" src="../images/deployment/deploy-model-select.png" /></p>
</li>
<li>
<p>The deployment <code>API reference</code> tab shows how to use the model using <code>cURL</code>, <code>Java</code>, <code>Javascript</code>, <code>Python</code>, and <code>Scala</code>.</p>
</li>
</ol>
<p><img alt="Select deployment" src="../images/deployment/deploy-api-reference.png" /></p>
<ol>
<li>
<p>To get to the built-in test tool, click on the <code>Test</code> tab and then click on the <em><code>JSON input</code></em> tab.</p>
<p><img alt="Test deployment with JSON" src="../images/deployment/deploy-model-test-page.png" /></p>
</li>
<li>
<p>Copy and paste the following data objects into the <code>Body</code> panel (replace the text that was in the input panel).</p>
<blockquote>
<p><em>Note: Click the tab appropriate for the model you are testing (either an AutoAI model or one built using the Jupyter notebook). Also make sure the input below is the only content in the field. Do not append it to the default content <code>{ "input_data": [] }</code> that may already be in the test input panel.</em></p>
</blockquote>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Jupyter Spark Model</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">&quot;input_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">&quot;fields&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;CheckingStatus&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;LoanDuration&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;CreditHistory&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;LoanPurpose&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;LoanAmount&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ExistingSavings&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;EmploymentDuration&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;InstallmentPercent&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Sex&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;OthersOnLoan&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;CurrentResidenceDuration&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;OwnsProperty&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Age&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;InstallmentPlans&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Housing&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ExistingCreditsCount&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Job&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Dependents&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Telephone&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ForeignWorker&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="w"> </span><span class="s2">&quot;no_checking&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;credits_paid_to_date&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;car_new&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1343</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;100_to_500&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;1_to_4&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;female&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;none&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;savings_insurance&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">46</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;none&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;own&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;skilled&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;none&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;yes&quot;</span><span class="p">]]</span>
<span class="p">}]}</span>
</code></pre></div>
</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">AutoAI Model</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">&quot;input_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">&quot;fields&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;CustomerId&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;CheckingStatus&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;LoanDuration&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;CreditHistory&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;LoanPurpose&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;LoanAmount&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ExistingSavings&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;EmploymentDuration&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;InstallmentPercent&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Sex&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;OthersOnLoan&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;CurrentResidenceDuration&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;OwnsProperty&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Age&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;InstallmentPlans&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Housing&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ExistingCreditsCount&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Job&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Dependents&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Telephone&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ForeignWorker&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;no_checking&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;credits_paid_to_date&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;car_new&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1343</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;100_to_500&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;1_to_4&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;female&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;none&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;savings_insurance&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">46</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;none&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;own&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;skilled&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;none&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;yes&quot;</span><span class="p">]]</span>
<span class="p">}]}</span>
</code></pre></div>
</div>
</div>
</li>
<li>
<p>Click the <em><code>Predict</code></em> button.</p>
<p><img alt="Testing the deployed model" src="../images/deployment/deploy-test-model-predict.png" /></p>
</li>
<li>
<p>The model will be called with the input data and the results will displayed in a dialog. Click on the <code>JSON view</code> radio button and scroll to the bottom to see the prediction (i.e "Risk" or "No Risk").</p>
<p><img alt="Testing the deployed model" src="../images/deployment/deploy-test-model-prediction.png" /></p>
</li>
</ol>
<h3 id="optional-test-online-model-deployment-using-curl">(Optional) Test Online Model Deployment using cURL<a class="headerlink" href="#optional-test-online-model-deployment-using-curl" title="Permanent link">&para;</a></h3>
<p>Now that the model is deployed, we can also test it from external applications. One way to invoke the model API is using the cURL command.</p>
<blockquote>
<p>NOTE: Windows users will need the <em>cURL</em> command. It's recommended to <a href="https://gitforwindows.org/">download gitbash</a> for this, as you'll also have other tools and you'll be able to easily use the shell environment variables in the following steps. Also note that if you are not using gitbash, you may need to change <em>export</em> commands to <em>set</em> commands.</p>
</blockquote>
<ol>
<li>From the Model deployment page, once the deployment status shows as <code>Deployed</code>, click on the name of your deployment.</li>
</ol>
<p><img alt="Select deployment" src="../images/deployment/deploy-model-select.png" /></p>
<ol>
<li>On deployment <code>API reference</code> copy the host name of the endpoint provided (the value before the slash (<code>/</code>). This will be the "Environment Endpoint".</li>
</ol>
<p><img alt="Select deployment" src="../images/deployment/deploy-api-reference-endpoint.png" /></p>
<ol>
<li>
<p>In a terminal window (or command prompt in Windows), run the following command to get a token to access the API. Replace <code>&lt;username&gt;</code> and <code>&lt;password&gt;</code> with the username and password you used to log into the Cloud Pak for Data environment. Replace <code>&lt;environment-endpoint&gt;</code> with the "Environment Endpoint" value from the previous step.</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-k<span class="w"> </span>-X<span class="w"> </span>GET<span class="w"> </span>https://&lt;environment-endpoint&gt;/v1/preauth/validateAuth<span class="w"> </span>-u<span class="w"> </span>&lt;username&gt;:&lt;password&gt;
</code></pre></div>
</li>
<li>
<p>A json string will be returned with a value for "accessToken" that will look <em>similar</em> to this:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="s2">&quot;scottda&quot;</span><span class="p">,</span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="s2">&quot;Admin&quot;</span><span class="p">,</span><span class="nt">&quot;permissions&quot;</span><span class="p">:[</span><span class="s2">&quot;access_catalog&quot;</span><span class="p">,</span><span class="s2">&quot;administrator&quot;</span><span class="p">,</span><span class="s2">&quot;manage_catalog&quot;</span><span class="p">,</span><span class="s2">&quot;can_provision&quot;</span><span class="p">],</span><span class="nt">&quot;sub&quot;</span><span class="p">:</span><span class="s2">&quot;scottda&quot;</span><span class="p">,</span><span class="nt">&quot;iss&quot;</span><span class="p">:</span><span class="s2">&quot;KNOXSSO&quot;</span><span class="p">,</span><span class="nt">&quot;aud&quot;</span><span class="p">:</span><span class="s2">&quot;DSX&quot;</span><span class="p">,</span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="s2">&quot;1000331002&quot;</span><span class="p">,</span><span class="nt">&quot;authenticator&quot;</span><span class="p">:</span><span class="s2">&quot;default&quot;</span><span class="p">,</span><span class="nt">&quot;accessToken&quot;</span><span class="p">:</span><span class="s2">&quot;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InNjb3R0ZGEiLCJyb2xlIjoiQWRtaW4iLCJwZXJtaXNzaW9ucyI6WyJhY2Nlc3NfY2F0YWxvZyIsImFkbWluaXN0cmF0b3IiLCJtYW5hZ2VfY2F0YWxvZyIsImNhbl9wcm92aXNpb24iXSwic3ViIjoic2NvdHRkYSIsImlzcyI6IktOT1hTU08iLCJhdWQiOiJEU1giLCJ1aWQiOiIxMDAwMzMxMDAyIiwiYXV0aGVudGljYXRvciI6ImRlZmF1bHQiLCJpYXQiOjE1NzM3NjM4NzYsImV4cCI6MTU3MzgwNzA3Nn0.vs90XYeKmLe0Efi5_3QV8F9UK1tjZmYIqmyCX575I7HY1QoH4DBhon2fa4cSzWLOM7OQ5Xm32hNUpxPH3xIi1PcxAntP9jBuM8Sue6JU4grTnphkmToSlN5jZvJOSa4RqqhjzgNKFoiqfl4D0t1X6uofwXgYmZESP3tla4f4dbhVz86RZ8ad1gS1_UNI-w8dfdmr-Q6e3UMDUaahh8JaAEiSZ_o1VTMdVPMWnRdD1_F0YnDPkdttwBFYcM9iSXHFt3gyJDCLLPdJkoyZFUa40iRB8Xf5-iA1sxGCkhK-NVHh-VTS2XmKAA0UYPGYXmouCTOUQHdGq2WXF7PkWQK0EA&quot;</span><span class="p">,</span><span class="nt">&quot;_messageCode_&quot;</span><span class="p">:</span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="s2">&quot;success&quot;</span><span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>You will save this access token to a temporary environment variable in your terminal. Copy the access token value (without the quotes) in the terminal and then use the following export command to save the "accessToken" to a variable called <code>WML_AUTH_TOKEN</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">IAM_AUTH_TOKEN</span><span class="o">=</span>&lt;value-of-access-token&gt;
</code></pre></div>
</li>
<li>
<p>Back on the model deployment page, gather the <code>URL</code> to invoke the deployed model from the <em>API reference</em> by copying the <code>Endpoint</code>.</p>
<p><img alt="Model Deployment Endpoint" src="../images/deployment/deploy-api-reference-endpoint-select.png" /></p>
</li>
<li>
<p>Now save that endpoint to a variable named <code>URL</code> in your terminal by exporting it.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">URL</span><span class="o">=</span>&lt;value-of-endpoint&gt;
</code></pre></div>
</li>
<li>
<p>Now run this curl command from the terminal to invoke the model with the same payload we used previously:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-k<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>--header<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span>--header<span class="w"> </span><span class="s1">&#39;Accept: application/json&#39;</span><span class="w"> </span>--header<span class="w"> </span><span class="s2">&quot;Authorization: Bearer  </span><span class="nv">$IAM_AUTH_TOKEN</span><span class="s2">&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;input_data&quot;: [{&quot;fields&quot;: [ &quot;CheckingStatus&quot;, &quot;LoanDuration&quot;, &quot;CreditHistory&quot;, &quot;LoanPurpose&quot;, &quot;LoanAmount&quot;, &quot;ExistingSavings&quot;, &quot;EmploymentDuration&quot;, &quot;InstallmentPercent&quot;, &quot;Sex&quot;, &quot;OthersOnLoan&quot;, &quot;CurrentResidenceDuration&quot;, &quot;OwnsProperty&quot;, &quot;Age&quot;, &quot;InstallmentPlans&quot;, &quot;Housing&quot;, &quot;ExistingCreditsCount&quot;, &quot;Job&quot;, &quot;Dependents&quot;, &quot;Telephone&quot;, &quot;ForeignWorker&quot;],&quot;values&quot;: [[ &quot;no_checking&quot;, 13, &quot;credits_paid_to_date&quot;, &quot;car_new&quot;, 1343, &quot;100_to_500&quot;, &quot;1_to_4&quot;, 2, &quot;female&quot;, &quot;none&quot;, 3, &quot;savings_insurance&quot;, 46, &quot;none&quot;, &quot;own&quot;, 2, &quot;skilled&quot;, 1, &quot;none&quot;, &quot;yes&quot;]]}]}&#39;</span><span class="w"> </span><span class="nv">$URL</span>
</code></pre></div>
</li>
<li>
<p>A json string will be returned with the response, including a prediction from the model (i.e a "Risk" or "No Risk" at the end indicating the prediction of this loan representing risk).</p>
</li>
</ol>
<h2 id="optional-batch-model-deployment">(Optional) Batch Model Deployment<a class="headerlink" href="#optional-batch-model-deployment" title="Permanent link">&para;</a></h2>
<p>Another approach to expose the model to be consumed by other users/applications is to create a batch deployment. This type of deployment will make an instance of the model available to make predictions against data assets or groups of records. The model prediction requests are scheduled as jobs, which are executed asynchronously.</p>
<h3 id="deploy-batch-model">Deploy Batch Model<a class="headerlink" href="#deploy-batch-model" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Navigate to the left-hand (☰) hamburger menu and click on <code>Deployments</code>.</p>
<p><img alt="Analytics Analyze deployments" src="../images/navigation/menu-analytics-deployments.png" /></p>
</li>
<li>
<p>Click on the <code>Spaces</code> tab and then choose the deployment space you setup previously by clicking on the name of your space.</p>
<p><img alt="Deployments space" src="../images/deployment/select-depspace.png" /></p>
</li>
<li>
<p>From your deployment space overview, select the <code>Assets</code> tab and find the model for which you want to create a deployment. Click on the "kebab" menu (three vertical dots) on the right side of the model row and select <code>Deploy</code>.</p>
</li>
</ol>
<blockquote>
<p>Note: There may be more than one model listed in the 'Models' section. This can happen if you have run the Jupyter notebook more than once or if you have run through both the Jupyter notebook and AutoAI modules to create models. Although you could select any of the models you see listed in the page, the recommendation is to start with whichever model is available that is using a <code>spark-mllib_X.X</code> software specification.</p>
</blockquote>
<p><img alt="Actions Deploy model" src="../images/deployment/deploy-spark-model.png" /></p>
<ol>
<li>
<p>On the 'Create a deployment' screen: choose <code>Batch</code> for the <code>Deployment Type</code>, give the deployment a name and optional description. From the 'Hardware specification' drop down, select the smallest option (<code>1 standard CPU, 4GB RAM</code> in this case though for large or frequent batch jobs, you might choose to scale the hardware up). Click the <em><code>Create</code></em> button.</p>
<p><img alt="Batch Deployment Create" src="../images/deployment/deploy-batch-deployment.png" /></p>
</li>
<li>
<p>Once the status shows as <code>Deployed</code> you will be able to start submitting jobs to the deployment.</p>
<p><img alt="Status Deployed" src="../images/deployment/deploy-batch_dep_status.png" /></p>
</li>
</ol>
<h3 id="create-and-schedule-a-job">Create and Schedule a Job<a class="headerlink" href="#create-and-schedule-a-job" title="Permanent link">&para;</a></h3>
<p>Next we can schedule a job to run against our batch deployment. We could create a job, with specific input data (or data asset) and schedule, either programmatically or through the UI. For this lab, we are going to do this programmatically using the Python client SDK. For this part of the exercise we're going to use a Jupyter notebook to create and submit a batch job to our model deployment.</p>
<blockquote>
<p><em>Note: The batch job input is impacted by the machine learning framework used to build the model. Currently, SparkML based model batch jobs require inline payload to be used. For other frameworks, we can use data assets (i.e CSV files) as the input payload.</em></p>
</blockquote>
<h4 id="open-the-batch-notebook">Open the Batch Notebook<a class="headerlink" href="#open-the-batch-notebook" title="Permanent link">&para;</a></h4>
<p>The Jupyter notebook is already included as an asset in the project you imported earlier.</p>
<ol>
<li>
<p>Go the (☰) navigation menu and under the <em>Projects</em> section click on <em><code>All Projects</code></em>.</p>
<p><img alt="(☰) Menu -&gt; Projects" src="../images/navigation/menu-projects.png" /></p>
</li>
<li>
<p>Click the project name you created in the pre-work section.</p>
</li>
<li>
<p>From your <code>Project</code> overview page, click on the <em><code>Assets</code></em> tab to open the assets page where your project assets are stored and organized.</p>
</li>
<li>
<p>Click on the <code>Notebooks</code> asset type, click on the "kebob" icon (vertical dots) on the right of the <code>machinelearning-creditrisk-batchscoring</code> notebook, and click <code>Edit</code>.</p>
<p><img alt="Notebook Open" src="../images/deployment/deploy_batch_open_nb.png" /></p>
</li>
<li>
<p>When the Jupyter notebook is loaded and the kernel is ready, we will be ready to start executing it in the next section.</p>
</li>
</ol>
<h4 id="run-notebook-sections">Run Notebook sections<a class="headerlink" href="#run-notebook-sections" title="Permanent link">&para;</a></h4>
<p>With the notebook open, spend a minute looking through the sections of the notebook to get an overview. A notebook is composed of text (markdown or heading) cells and code cells. The markdown cells provide comments on what the code is designed to do. You will run cells individually by highlighting each cell, then either click the <code>Run</code> button at the top of the notebook or hitting the keyboard short-cut to run the cell (Shift + Enter but can vary based on platform). While the cell is running, an asterisk (<code>[*]</code>) will show up to the left of the cell. When that cell has finished executing a sequential number will show up (i.e. <code>[17]</code>).</p>
<p><strong>Please note that some of the comments in the notebook are directions for you to modify specific sections of the code. Perform any changes as indicated before running / executing the cell.</strong></p>
<ol>
<li>
<p>Section <code>1.0 Install required packages</code> will install some of the libraries we are going to use in the notebook (many libraries come pre-installed on Cloud Pak for Data). Note that we upgrade the installed version of Watson Machine Learning Python Client. Ensure the output of the first code cell is that the python packages were successfully installed. (If the <code>ibm-watson-machine-learning</code> step fails, remove the <code>=1.0.53</code> from the line and re-run.)</p>
<p><img alt="NB Section 1 Complete" src="../images/deployment/deploy-batchnb-packageinstall.png" /></p>
</li>
<li>
<p>Section <code>2.0 Create Batch Deployment Job</code> will create a job for the batch deployment. To do that, we will use the Watson Machine Learning client to get our deployment and create a job.</p>
<ul>
<li>
<p>In the first code cell for <code>Section 2.1</code>, be sure to update the <code>wml_credentials</code> variable.</p>
</li>
<li>
<p>The url should be the hostname of the Cloud Pak for Data instance.</p>
</li>
<li>The username and password should be the same credentials you used to log into Cloud Pak for Data.</li>
<li>
<p>Update the version number to <code>4.6</code>.</p>
</li>
<li>
<p>In section 2.2, be sure to update the <code>DEPLOYMENT_SPACE_NAME</code> variable with your deployment space name (copy and paste the name which is within the output of the previous code cell).</p>
</li>
</ul>
<p><img alt="NB Section 2 Complete" src="../images/deployment/deploy-batchnb-dsname-set.png" /></p>
<ul>
<li>In section 2.3, be sure to update the <code>DEPLOYMENT_NAME</code> variable with the name of the batch deployment you created previously (copy and paste the name which is within the output of the previous code cell).</li>
</ul>
<p><img alt="NB Section 2 Complete" src="../images/deployment/deploy-batchnb-depname-set.png" /></p>
<ul>
<li>Continue to run the rest of the cells in section 2 which will load the batch input data set and create the job. The last code cell in section 2 will show that the job is in a queued state.</li>
</ul>
</li>
<li>
<p>Section <code>3.0 Monitor Batch Job Status</code> will start polling the job status until it completes or fails. The code cell will output the status every 5 seconds as the job goes from queued to running to completed or failed.</p>
<p><img alt="Batch Job Status" src="../images/deployment/deploy_batch_results_poll.png" /></p>
</li>
<li>
<p>Once the job completes, continue to run the cells until the end of the notebook.</p>
</li>
</ol>
<h3 id="cleanup-and-stop-environment">Cleanup and Stop Environment<a class="headerlink" href="#cleanup-and-stop-environment" title="Permanent link">&para;</a></h3>
<p><strong>Important</strong>: In order to conserve resources, make sure that you stop the environment used by your notebook(s) when you are done.</p>
<ol>
<li>
<p>Navigate back to your project information page by clicking on your project name from the navigation drill down on the top left of the page.</p>
<p><img alt="Back to project" src="../images/ml/navigate-to-project.png" /></p>
</li>
<li>
<p>Click on the <code>Manage</code> tab near the top of the page. Then in the <code>Environments</code> section, you will see the environment used by your notebook. Check the box next to the environment and select the <code>Stop runeimes</code> button at the top.</p>
<p><img alt="Stop environment" src="../images/ml/stop-notebook-environment.png" /></p>
</li>
<li>
<p>Click the <code>Stop</code> button on the subsequent pop up window.</p>
</li>
</ol>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h2>
<p>In this section we covered the followings:</p>
<ul>
<li>Creating and Testing Online Deployments for models.</li>
<li>(Optional) Creating and Testing Batch Deployments for models.</li>
<li>(Optional) Integrating the model deployment in an external application.</li>
</ul>
<p>Taking a predictive model and infusing AI into applications.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../machine-learning-autoai/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Machine Learning with AutoAI" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Machine Learning with AutoAI
              </div>
            </div>
          </a>
        
        
          
          <a href="../openscale-fastpath/" class="md-footer__link md-footer__link--next" aria-label="Next: Monitoring models with OpenScale GUI (Auto setup Monitoring)" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Monitoring models with OpenScale GUI (Auto setup Monitoring)
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 IBM Developer
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/ibm" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/ibmdeveloper" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/ibm/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.youtube.com/user/developerworks" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://dev.to/ibmdeveloper" target="_blank" rel="noopener" title="dev.to" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.footer"], "search": "../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>